# ç®¡ç†ç”»é¢ä½œæˆãƒ—ãƒ©ãƒ³

## æ¦‚è¦
æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®SQLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦è§£æã—ã€GUIä¸Šã§ç”»é¢è¨­å®šã‚’è¡Œã„ã€æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ ã«åæ˜ ã™ã‚‹ç®¡ç†ç”»é¢ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

---

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
TableCraft/
â”œâ”€â”€ backend/                          # æ—¢å­˜ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â””â”€â”€ src/main/java/com/tablecraft/app/
â”‚       â”œâ”€â”€ controller/               # æ¥­å‹™APIï¼ˆæ—¢å­˜ï¼‰
â”‚       â”œâ”€â”€ service/                  # æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ—¢å­˜ï¼‰
â”‚       â”œâ”€â”€ admin/                    # ç®¡ç†æ©Ÿèƒ½ï¼ˆæ–°è¦ï¼‰
â”‚       â”‚   â”œâ”€â”€ controller/
â”‚       â”‚   â”‚   â”œâ”€â”€ SqlParserController.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ConfigEditorController.java
â”‚       â”‚   â”‚   â”œâ”€â”€ PreviewController.java
â”‚       â”‚   â”‚   â””â”€â”€ DeployController.java
â”‚       â”‚   â”œâ”€â”€ service/
â”‚       â”‚   â”‚   â”œâ”€â”€ SqlParserService.java
â”‚       â”‚   â”‚   â”œâ”€â”€ ConfigMergeService.java
â”‚       â”‚   â”‚   â””â”€â”€ ConfigGeneratorService.java
â”‚       â”‚   â””â”€â”€ model/
â”‚       â”‚       â”œâ”€â”€ ParsedTable.java
â”‚       â”‚       â”œâ”€â”€ TableMetadata.java
â”‚       â”‚       â”œâ”€â”€ FieldConfig.java
â”‚       â”‚       â””â”€â”€ AdminResponse.java
â”‚       â””â”€â”€ config/
â”‚           â””â”€â”€ AdminSecurityConfig.java
â”‚
â”œâ”€â”€ frontend/                         # æ¥­å‹™ç”»é¢ï¼ˆæ—¢å­˜ï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts               # ãƒãƒ¼ãƒˆ: 5173
â”‚
â””â”€â”€ frontend-admin/                   # ç®¡ç†ç”»é¢ï¼ˆæ–°è¦ä½œæˆï¼‰
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ SqlUpload.tsx
    â”‚   â”‚   â”œâ”€â”€ TableList.tsx
    â”‚   â”‚   â”œâ”€â”€ TableEditor.tsx
    â”‚   â”‚   â”œâ”€â”€ FieldEditor.tsx
    â”‚   â”‚   â”œâ”€â”€ Preview.tsx
    â”‚   â”‚   â””â”€â”€ Deploy.tsx
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ admin/
    â”‚   â”‚   â”‚   â”œâ”€â”€ SqlParser.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ IconPicker.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ColorPicker.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ValidationEditor.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ AutofillEditor.tsx
    â”‚   â”‚   â”‚   â””â”€â”€ AutoCalculateEditor.tsx
    â”‚   â”‚   â””â”€â”€ common/
    â”‚   â”‚       â””â”€â”€ AdminLayout.tsx
    â”‚   â”œâ”€â”€ services/
    â”‚   â”‚   â””â”€â”€ adminApi.ts
    â”‚   â”œâ”€â”€ types/
    â”‚   â”‚   â””â”€â”€ admin.ts
    â”‚   â”œâ”€â”€ App.tsx
    â”‚   â”œâ”€â”€ main.tsx
    â”‚   â””â”€â”€ index.css
    â”œâ”€â”€ public/
    â”œâ”€â”€ index.html
    â”œâ”€â”€ package.json
    â”œâ”€â”€ tsconfig.json
    â”œâ”€â”€ tsconfig.app.json
    â”œâ”€â”€ tsconfig.node.json
    â”œâ”€â”€ vite.config.ts               # ãƒãƒ¼ãƒˆ: 5174
    â””â”€â”€ README.md
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
```
backend/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ draft/                       # ç·¨é›†ä¸­ã®è¨­å®šï¼ˆæœªãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
â”‚   â”‚   â”œâ”€â”€ parsed-sql.json         # SQLè§£æçµæœ
â”‚   â”‚   â”œâ”€â”€ table-metadata.json     # ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆç·¨é›†ä¸­ï¼‰
â”‚   â”‚   â”œâ”€â”€ ui-config.json          # UIè¨­å®šï¼ˆç·¨é›†ä¸­ï¼‰
â”‚   â”‚   â””â”€â”€ validation-config.json  # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šï¼ˆç·¨é›†ä¸­ï¼‰
â”‚   â””â”€â”€ production/                  # æœ¬ç•ªåæ˜ æ¸ˆã¿è¨­å®š
â”‚       â”œâ”€â”€ table-config.json       # æ¥­å‹™ç”»é¢ã§ä½¿ç”¨
â”‚       â”œâ”€â”€ validation-config.json
â”‚       â””â”€â”€ ui-config.json
```

---

## Phase 1: SQLè§£æã‚¨ãƒ³ã‚¸ãƒ³

### 1.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### SqlParserController.java
```java
@RestController
@RequestMapping("/api/admin/sql")
public class SqlParserController {
    
    @PostMapping("/upload")
    public ResponseEntity<AdminResponse> uploadSql(@RequestParam("file") MultipartFile file)
    
    @PostMapping("/parse")
    public ResponseEntity<AdminResponse> parseSql(@RequestBody String sql)
    
    @GetMapping("/parsed-tables")
    public ResponseEntity<List<ParsedTable>> getParsedTables()
}
```

#### SqlParserService.java
- JSqlParser ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨
- CREATE TABLEæ–‡ã‚’è§£æ
- ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã‚’Javaã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
- å¤–éƒ¨ã‚­ãƒ¼ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€åˆ¶ç´„ã‚’æŠ½å‡º
- **ã‚½ãƒ¼ã‚¹DBMSè‡ªå‹•èªè­˜æ©Ÿèƒ½**
  - MySQLå°‚ç”¨æ§‹æ–‡ã®æ¤œå‡ºï¼ˆ`AUTO_INCREMENT`, `TINYINT`, `MEDIUMINT`ï¼‰
  - Oracleå°‚ç”¨æ§‹æ–‡ã®æ¤œå‡ºï¼ˆ`VARCHAR2`, `NUMBER`, `CLOB`, `SEQUENCE`ï¼‰
  - æ¤œå‡ºçµæœã«åŸºã¥ã„ã¦é©åˆ‡ãªãƒ‘ãƒ¼ã‚µãƒ¼ã‚’é¸æŠ

#### SqlDialectConverter.javaï¼ˆæ–°è¦ï¼‰
- **Oracle â†’ MySQL å¤‰æ›æ©Ÿèƒ½**
  - ãƒ‡ãƒ¼ã‚¿å‹å¤‰æ›ï¼ˆ`NUMBER` â†’ `DECIMAL`, `VARCHAR2` â†’ `VARCHAR`, `CLOB` â†’ `TEXT`ï¼‰
  - AUTO_INCREMENTå¤‰æ›ï¼ˆ`SEQUENCE` â†’ `AUTO_INCREMENT`ï¼‰
  - æ—¥ä»˜å‹å¤‰æ›ï¼ˆ`DATE` â†’ `DATETIME`ï¼‰
  - é–¢æ•°å¤‰æ›ï¼ˆ`SYSDATE` â†’ `NOW()`ï¼‰
  - åˆ¶ç´„æ§‹æ–‡ã®æ­£è¦åŒ–
- **å¤‰æ›è­¦å‘Šã®ç”Ÿæˆ**
  - å¤‰æ›ã§ããªã„æ§‹æ–‡ã®è­¦å‘Š
  - æ‰‹å‹•ç¢ºèªãŒå¿…è¦ãªç®‡æ‰€ã®é€šçŸ¥
  - ãƒ‡ãƒ¼ã‚¿å‹å¤‰æ›ã«ã‚ˆã‚‹ç²¾åº¦å¤‰æ›´ã®é€šçŸ¥

#### DatabaseType.javaï¼ˆæ–°è¦ï¼‰
```java
public enum DatabaseType {
    MYSQL,      // MySQLå°‚ç”¨æ§‹æ–‡ã‚’æ¤œå‡º
    ORACLE,     // Oracleå°‚ç”¨æ§‹æ–‡ã‚’æ¤œå‡º
    UNKNOWN     // åˆ¤å®šä¸èƒ½ãªå ´åˆ
}
```

#### ConversionResult.javaï¼ˆæ–°è¦ï¼‰
```java
public class ConversionResult {
    private String convertedSql;           // å¤‰æ›å¾Œã®SQL
    private List<String> warnings;         // å¤‰æ›æ™‚ã®è­¦å‘Š
    private List<String> manualActions;    // æ‰‹å‹•å¯¾å¿œãŒå¿…è¦ãªé …ç›®
    private DatabaseType detectedType;     // æ¤œå‡ºã•ã‚ŒãŸDBMSç¨®é¡
}
```

#### å®Ÿè£…å†…å®¹
1. SQLãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
2. **DBMSè‡ªå‹•èªè­˜**ï¼ˆå„ªå…ˆé †ä½: MySQL â†’ Oracle â†’ Unknownï¼‰
3. CREATE TABLEæ–‡ã®ãƒ‘ãƒ¼ã‚¹
4. **Oracleæ§‹æ–‡ã®å ´åˆã¯è‡ªå‹•çš„ã«MySQLæ§‹æ–‡ã«å¤‰æ›**
5. ã‚«ãƒ©ãƒ æƒ…å ±ã®æŠ½å‡ºï¼ˆå‹ã€åˆ¶ç´„ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼‰
6. å¤–éƒ¨ã‚­ãƒ¼é–¢ä¿‚ã®è§£æ
7. **å¤‰æ›è­¦å‘Šã¨æ‰‹å‹•å¯¾å¿œé …ç›®ã®ç”Ÿæˆ**
8. è§£æçµæœã¨å¤‰æ›æƒ…å ±ã‚’JSONã§è¿”å´

#### å¯¾å¿œDBMSã¨å„ªå…ˆåº¦
- **Phase 1ï¼ˆæœ€å„ªå…ˆï¼‰**: MySQL â†’ MySQLï¼ˆãã®ã¾ã¾è§£æï¼‰
- **Phase 1ï¼ˆå„ªå…ˆï¼‰**: Oracle â†’ MySQLï¼ˆè‡ªå‹•å¤‰æ›ï¼‰
- **Phase 2ï¼ˆå°†æ¥ï¼‰**: PostgreSQL â†’ MySQLï¼ˆæ‹¡å¼µäºˆå®šï¼‰

### 1.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### SqlUpload.tsx
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UI
- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å¯¾å¿œ
- SQLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
- è§£æãƒœã‚¿ãƒ³
- **DBMSè‡ªå‹•èªè­˜çµæœã®è¡¨ç¤º**
  - æ¤œå‡ºã•ã‚ŒãŸDBMSç¨®é¡ï¼ˆMySQL/Oracleï¼‰
  - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆDBMSï¼ˆç¾åœ¨ã¯MySQLå›ºå®šï¼‰
- **å¤‰æ›è­¦å‘Šã®è¡¨ç¤º**
  - ãƒ‡ãƒ¼ã‚¿å‹å¤‰æ›ã®é€šçŸ¥
  - æ‰‹å‹•å¯¾å¿œãŒå¿…è¦ãªé …ç›®ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º
  - å¤‰æ›å‰å¾Œã®SQLå·®åˆ†è¡¨ç¤ºï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### SqlParser.tsx
- è§£æçµæœã®è¡¨ç¤º
- ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§
- ã‚«ãƒ©ãƒ ä¸€è¦§
- å¤–éƒ¨ã‚­ãƒ¼é–¢ä¿‚ã®å¯è¦–åŒ–
- **DBMSæƒ…å ±ã®è¡¨ç¤º**
  - ã‚½ãƒ¼ã‚¹DBMSç¨®é¡
  - å¤‰æ›é©ç”¨ã®æœ‰ç„¡
- **å¤‰æ›è­¦å‘Šã‚»ã‚¯ã‚·ãƒ§ãƒ³**
  - è­¦å‘Šãƒ¬ãƒ™ãƒ«åˆ¥è¡¨ç¤ºï¼ˆInfo/Warning/Errorï¼‰
  - æ‰‹å‹•å¯¾å¿œãŒå¿…è¦ãªé …ç›®ã®ãƒªã‚¹ãƒˆ
  - æ¨å¥¨ã•ã‚Œã‚‹å¯¾å¿œæ–¹æ³•ã®æç¤º

---

## Phase 2: è¨­å®šç·¨é›†UI

### 2.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### ConfigEditorController.java
```java
@RestController
@RequestMapping("/api/admin/config")
public class ConfigEditorController {
    
    @GetMapping("/tables")
    public ResponseEntity<List<TableMetadata>> getAllTables()
    
    @GetMapping("/tables/{tableName}")
    public ResponseEntity<TableMetadata> getTable(@PathVariable String tableName)
    
    @PutMapping("/tables/{tableName}")
    public ResponseEntity<AdminResponse> updateTable(@PathVariable String tableName, @RequestBody TableMetadata metadata)
    
    @PutMapping("/tables/{tableName}/fields/{fieldName}")
    public ResponseEntity<AdminResponse> updateField(@PathVariable String tableName, @PathVariable String fieldName, @RequestBody FieldConfig config)
}
```

#### ConfigMergeService.java
- SQLè§£æçµæœã¨UIè¨­å®šã‚’ãƒãƒ¼ã‚¸
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®è‡ªå‹•è¨­å®š
- ä¸æ•´åˆãƒã‚§ãƒƒã‚¯

### 2.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### TableList.tsx
- ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§è¡¨ç¤º
- ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§é¸æŠ
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
- æ¤œç´¢æ©Ÿèƒ½

#### TableEditor.tsx
- ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç·¨é›†
  - ã‚¢ã‚¤ã‚³ãƒ³é¸æŠï¼ˆIconPickerï¼‰
  - è‰²é¸æŠï¼ˆColorPickerï¼‰
  - è¡¨ç¤ºé †åº
  - å¤šè¨€èªãƒ©ãƒ™ãƒ«ï¼ˆæ—¥æœ¬èª/è‹±èªï¼‰
  - ã‚«ãƒ†ã‚´ãƒªãƒ¼è¨­å®š

#### FieldEditor.tsx
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¨­å®šç·¨é›†
  - ãƒ©ãƒ™ãƒ«ï¼ˆæ—¥æœ¬èª/è‹±èªï¼‰
  - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
  - å…¥åŠ›ã‚¿ã‚¤ãƒ—ï¼ˆtext/number/date/selectç­‰ï¼‰
  - è¡¨ç¤º/éè¡¨ç¤º
  - èª­ã¿å–ã‚Šå°‚ç”¨
  - å¿…é ˆãƒ•ãƒ©ã‚°

#### ValidationEditor.tsx
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«è¨­å®š
  - å¿…é ˆãƒã‚§ãƒƒã‚¯
  - æœ€å°/æœ€å¤§æ–‡å­—æ•°
  - æœ€å°/æœ€å¤§å€¤
  - ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒï¼ˆæ­£è¦è¡¨ç¾/emailï¼‰

#### AutofillEditor.tsx
- Autofillè¨­å®š
  - ã‚½ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«é¸æŠ
  - ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°
  - ä¸Šæ›¸ãè¨±å¯è¨­å®š

#### AutoCalculateEditor.tsx
- AutoCalculateè¨­å®š
  - è¨ˆç®—å¼å…¥åŠ›ï¼ˆå¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
  - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰é¸æŠ
  - ãƒˆãƒªã‚¬ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰é¸æŠ

---

## Phase 3: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½

### 3.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### PreviewController.java
```java
@RestController
@RequestMapping("/api/admin/preview")
public class PreviewController {
    
    @PostMapping("/generate")
    public ResponseEntity<AdminResponse> generatePreview()
    
    @GetMapping("/config")
    public ResponseEntity<Map<String, Object>> getPreviewConfig()
}
```

#### å®Ÿè£…å†…å®¹
- draftè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€æ™‚çš„ã«table-configå½¢å¼ã«å¤‰æ›
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§é…ä¿¡

### 3.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### Preview.tsx
- iframe ã¾ãŸã¯ åˆ¥ã‚¿ãƒ–ã§æ¥­å‹™ç”»é¢ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
- ç·¨é›†ä¸­ã®è¨­å®šã‚’é©ç”¨ã—ãŸçŠ¶æ…‹ã§è¡¨ç¤º
- ãƒ†ãƒ¼ãƒ–ãƒ«åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½

---

## Phase 4: ãƒ‡ãƒ—ãƒ­ã‚¤æ©Ÿèƒ½

### 4.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### DeployController.java
```java
@RestController
@RequestMapping("/api/admin/deploy")
public class DeployController {
    
    @PostMapping("/validate")
    public ResponseEntity<AdminResponse> validateConfig()
    
    @PostMapping("/execute")
    public ResponseEntity<AdminResponse> deployConfig()
    
    @PostMapping("/rollback")
    public ResponseEntity<AdminResponse> rollback()
    
    @GetMapping("/history")
    public ResponseEntity<List<DeployHistory>> getDeployHistory()
}
```

#### ConfigGeneratorService.java
- draftè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ±åˆ
- table-config.jsonç”Ÿæˆ
- validation-config.jsonç”Ÿæˆ
- ui-config.jsonç”Ÿæˆ
- types.tsç”Ÿæˆ
- messages_ja.propertiesç”Ÿæˆ
- messages_en.propertiesç”Ÿæˆ

#### å®Ÿè£…å†…å®¹
1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
2. draft â†’ production ã¸ã®ç§»å‹•
3. æ¥­å‹™ç”»é¢ç”¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ
4. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
5. ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½

### 4.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### Deploy.tsx
- ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœè¡¨ç¤º
- ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œãƒœã‚¿ãƒ³
- ãƒ‡ãƒ—ãƒ­ã‚¤å±¥æ­´è¡¨ç¤º
- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½

---

## APIè¨­è¨ˆ

### 1. SQLã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»è§£æ
```http
POST /api/admin/sql/upload
Content-Type: multipart/form-data
Body: file=dump.sql

Response:
{
  "success": true,
  "message": "SQL parsed successfully",
  "detectedDbms": "oracle",
  "targetDbms": "mysql",
  "conversionApplied": true,
  "warnings": [
    {
      "level": "info",
      "message": "NUMBERå‹ã‚’DECIMALã«å¤‰æ›ã—ã¾ã—ãŸ"
    },
    {
      "level": "info",
      "message": "VARCHAR2ã‚’VARCHARã«å¤‰æ›ã—ã¾ã—ãŸ"
    },
    {
      "level": "warning",
      "message": "SEQUENCEã‚’AUTO_INCREMENTã«å¤‰æ›ã—ã¾ã—ãŸã€‚å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
    }
  ],
  "manualActions": [
    {
      "table": "users",
      "issue": "Oracleå›ºæœ‰ã®ã‚¹ãƒˆã‚¢ãƒ‰ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ",
      "recommendation": "MySQLç”¨ã«æ‰‹å‹•ã§æ›¸ãæ›ãˆãŒå¿…è¦ã§ã™"
    }
  ],
  "tables": [
    {
      "name": "users",
      "originalSql": "CREATE TABLE users (...)",
      "convertedSql": "CREATE TABLE users (...)",
      "columns": [
        {
          "name": "id",
          "type": "BIGINT",
          "length": null,
          "precision": null,
          "scale": null,
          "constraints": {
            "primaryKey": true,
            "autoIncrement": true,
            "nullable": false,
            "unique": false,
            "default": null
          }
        },
        {
          "name": "name",
          "type": "VARCHAR",
          "length": 100,
          "constraints": {
            "nullable": false
          }
        }
      ],
      "foreignKeys": [
        {
          "column": "department_id",
          "referenceTable": "departments",
          "referenceColumn": "id",
          "onDelete": "CASCADE",
          "onUpdate": "CASCADE"
        }
      ],
      "indexes": []
    }
  ]
}
```

### 2. ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§å–å¾—
```http
GET /api/admin/config/tables

Response:
{
  "success": true,
  "tables": [
    {
      "name": "users",
      "metadata": {
        "icon": "ğŸ‘¤",
        "color": "#4A90E2",
        "sortOrder": 1,
        "category": "user_management",
        "labels": {
          "ja": "ãƒ¦ãƒ¼ã‚¶ãƒ¼",
          "en": "Users"
        }
      },
      "fieldCount": 6,
      "lastModified": "2025-11-25T10:30:00"
    }
  ]
}
```

### 3. ãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°å–å¾—
```http
GET /api/admin/config/tables/users

Response:
{
  "success": true,
  "table": {
    "name": "users",
    "metadata": {
      "icon": "ğŸ‘¤",
      "color": "#4A90E2",
      "sortOrder": 1,
      "category": "user_management",
      "labels": {
        "ja": "ãƒ¦ãƒ¼ã‚¶ãƒ¼",
        "en": "Users"
      },
      "description": {
        "ja": "ã‚·ã‚¹ãƒ†ãƒ åˆ©ç”¨è€…ã®ç®¡ç†",
        "en": "System user management"
      }
    },
    "columns": [...],
    "fields": {
      "name": {
        "label": {
          "ja": "æ°å",
          "en": "Name"
        },
        "placeholder": {
          "ja": "æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          "en": "Enter your name"
        },
        "inputType": "text",
        "displayInList": true,
        "displayInForm": true,
        "required": true,
        "readonly": false,
        "hidden": false,
        "sortable": true,
        "searchable": true,
        "validation": {
          "required": true,
          "minLength": 2,
          "maxLength": 100
        }
      }
    }
  }
}
```

### 4. ãƒ†ãƒ¼ãƒ–ãƒ«è¨­å®šæ›´æ–°
```http
PUT /api/admin/config/tables/users
Content-Type: application/json

{
  "metadata": {
    "icon": "ğŸ‘¤",
    "color": "#4A90E2",
    "labels": {
      "ja": "ãƒ¦ãƒ¼ã‚¶ãƒ¼"
    }
  }
}

Response:
{
  "success": true,
  "message": "Table metadata updated successfully"
}
```

### 5. ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¨­å®šæ›´æ–°
```http
PUT /api/admin/config/tables/users/fields/name
Content-Type: application/json

{
  "label": {
    "ja": "æ°å",
    "en": "Name"
  },
  "placeholder": {
    "ja": "æ°åã‚’å…¥åŠ›"
  },
  "validation": {
    "required": true,
    "minLength": 2
  }
}

Response:
{
  "success": true,
  "message": "Field configuration updated successfully"
}
```

### 6. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆ
```http
POST /api/admin/preview/generate

Response:
{
  "success": true,
  "message": "Preview generated successfully",
  "previewUrl": "/preview"
}
```

### 7. ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
```http
POST /api/admin/deploy/execute
Content-Type: application/json

{
  "tables": ["users", "categories", "products"]
}

Response:
{
  "success": true,
  "message": "Configuration deployed successfully",
  "deployedFiles": [
    "table-config.json",
    "validation-config.json",
    "ui-config.json",
    "types.ts",
    "messages_ja.properties",
    "messages_en.properties"
  ],
  "backupId": "backup_20251125_103000"
}
```

### 8. ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
```http
POST /api/admin/deploy/rollback
Content-Type: application/json

{
  "backupId": "backup_20251125_103000"
}

Response:
{
  "success": true,
  "message": "Configuration rolled back successfully"
}
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **SQLè§£æ**: JSqlParser (https://github.com/JSQLParser/JSqlParser)
- **DBMSæ–¹è¨€å¯¾å¿œ**: 
  - è‡ªå‹•èªè­˜ï¼ˆMySQL, Oracleï¼‰
  - Oracle â†’ MySQL å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯
  - ãƒ‡ãƒ¼ã‚¿å‹ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«
- **ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ**: Java NIO
- **JSONå‡¦ç†**: Jackson
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: Spring Validation

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: React 18 + TypeScript
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: React Router v6
- **çŠ¶æ…‹ç®¡ç†**: React Context API or Zustand
- **UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: æ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å†åˆ©ç”¨
- **ã‚¢ã‚¤ã‚³ãƒ³**: Emoji Picker or React Icons
- **ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼**: react-colorful
- **ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿**: Monaco Editor (SQLç·¨é›†ç”¨)
- **HTTPé€šä¿¡**: Axios

---

## å®Ÿè£…é †åº

### Sprint 1: åŸºç›¤æ§‹ç¯‰ï¼ˆ1é€±é–“ï¼‰
- [ ] frontend-adminãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [ ] ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰adminãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
- [ ] åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
- [ ] ç®¡ç†ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ

### Sprint 2: SQLè§£æï¼ˆ1é€±é–“ï¼‰
- [ ] JSqlParserãƒ©ã‚¤ãƒ–ãƒ©ãƒªå°å…¥
- [ ] **DBMSè‡ªå‹•èªè­˜æ©Ÿèƒ½å®Ÿè£…**
  - [ ] MySQLæ§‹æ–‡æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
  - [ ] Oracleæ§‹æ–‡æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
- [ ] **SqlDialectConverterå®Ÿè£…**
  - [ ] Oracle â†’ MySQL ãƒ‡ãƒ¼ã‚¿å‹å¤‰æ›
  - [ ] SEQUENCE â†’ AUTO_INCREMENTå¤‰æ›
  - [ ] é–¢æ•°å¤‰æ›ï¼ˆSYSDATE â†’ NOW()ç­‰ï¼‰
  - [ ] å¤‰æ›è­¦å‘Šç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
- [ ] SqlParserServiceå®Ÿè£…
- [ ] SqlParserControllerå®Ÿè£…
- [ ] SqlUploadç”»é¢å®Ÿè£…
  - [ ] DBMSæ¤œå‡ºçµæœè¡¨ç¤º
  - [ ] å¤‰æ›è­¦å‘Šè¡¨ç¤ºUI
- [ ] è§£æçµæœè¡¨ç¤ºæ©Ÿèƒ½
  - [ ] å¤‰æ›å‰å¾Œã®SQLè¡¨ç¤º
  - [ ] æ‰‹å‹•å¯¾å¿œé …ç›®ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ

### Sprint 3: è¨­å®šç·¨é›†UIï¼ˆ2é€±é–“ï¼‰
- [ ] TableListç”»é¢å®Ÿè£…
- [ ] TableEditorç”»é¢å®Ÿè£…
- [ ] FieldEditorç”»é¢å®Ÿè£…
- [ ] IconPicker/ColorPickerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [ ] ValidationEditorå®Ÿè£…
- [ ] AutofillEditorå®Ÿè£…
- [ ] AutoCalculateEditorå®Ÿè£…

### Sprint 4: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
- [ ] PreviewControllerå®Ÿè£…
- [ ] ä¸€æ™‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
- [ ] Previewç”»é¢å®Ÿè£…
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨APIä½œæˆ

### Sprint 5: ãƒ‡ãƒ—ãƒ­ã‚¤æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
- [ ] ConfigGeneratorServiceå®Ÿè£…
- [ ] DeployControllerå®Ÿè£…
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½
- [ ] ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
- [ ] Deployç”»é¢å®Ÿè£…
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤å±¥æ­´è¡¨ç¤º

### Sprint 6: ãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆ1é€±é–“ï¼‰
- [ ] E2Eãƒ†ã‚¹ãƒˆ
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

---

## èµ·å‹•æ–¹æ³•

### é–‹ç™ºç’°å¢ƒ
```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆãƒãƒ¼ãƒˆ8082ï¼‰
cd backend
mvn spring-boot:run

# æ¥­å‹™ç”»é¢ãƒ•ãƒ­ãƒ³ãƒˆï¼ˆãƒãƒ¼ãƒˆ5173ï¼‰
cd frontend
npm run dev

# ç®¡ç†ç”»é¢ãƒ•ãƒ­ãƒ³ãƒˆï¼ˆãƒãƒ¼ãƒˆ5174ï¼‰
cd frontend-admin
npm run dev
```

### ã‚¢ã‚¯ã‚»ã‚¹URL
- æ¥­å‹™ç”»é¢: http://localhost:5173
- ç®¡ç†ç”»é¢: http://localhost:5174
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: http://localhost:8082

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **èªè¨¼**: ç®¡ç†ç”»é¢ã¯èªè¨¼å¿…é ˆï¼ˆSpring Securityï¼‰
2. **èªå¯**: ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯
3. **CSRFä¿è­·**: è¨­å®šå¤‰æ›´ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚
4. **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸSQLã®æ¤œè¨¼
5. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åˆ¶é™**: ã‚µã‚¤ã‚ºåˆ¶é™ã€æ‹¡å¼µå­ãƒã‚§ãƒƒã‚¯

---

## ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

### DBMSå¯¾å¿œæ‹¡å¼µ
- [ ] PostgreSQL â†’ MySQL å¤‰æ›å¯¾å¿œ
- [ ] SQL Server â†’ MySQL å¤‰æ›å¯¾å¿œ
- [ ] å¤‰æ›ãƒ«ãƒ¼ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ©Ÿèƒ½
- [ ] å¤‰æ›ç²¾åº¦å‘ä¸Šï¼ˆè¤‡é›‘ãªæ§‹æ–‡ã¸ã®å¯¾å¿œï¼‰

### æ©Ÿèƒ½æ‹¡å¼µ
- [ ] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆã‚ˆãä½¿ã†è¨­å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¿å­˜ï¼‰
- [ ] è¤‡æ•°ç’°å¢ƒå¯¾å¿œï¼ˆdev/staging/productionï¼‰
- [ ] è¨­å®šã®å·®åˆ†è¡¨ç¤º
- [ ] ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] å¤‰æ›´å±¥æ­´ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
- [ ] ãƒãƒ¼ãƒ ç·¨é›†æ©Ÿèƒ½ï¼ˆè¤‡æ•°äººã§ã®è¨­å®šä½œæ¥­ï¼‰

---

## DBMSå¯¾å¿œè©³ç´°

### Phase 1: MySQL/Oracleå¯¾å¿œï¼ˆåˆæœŸãƒªãƒªãƒ¼ã‚¹ï¼‰

#### å¯¾å¿œDBMS
1. **MySQL â†’ MySQL**: ãã®ã¾ã¾è§£æï¼ˆå¤‰æ›ãªã—ï¼‰
2. **Oracle â†’ MySQL**: è‡ªå‹•å¤‰æ›

#### Oracle â†’ MySQL å¤‰æ›ãƒ«ãƒ¼ãƒ«

##### ãƒ‡ãƒ¼ã‚¿å‹ãƒãƒƒãƒ”ãƒ³ã‚°
| Oracle | MySQL | å‚™è€ƒ |
|--------|-------|------|
| `NUMBER(p,s)` | `DECIMAL(p,s)` | ç²¾åº¦ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ä¿æŒ |
| `NUMBER` | `DECIMAL(38,0)` | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç²¾åº¦ |
| `VARCHAR2(n)` | `VARCHAR(n)` | é•·ã•ä¿æŒ |
| `CLOB` | `TEXT` | å¤§å®¹é‡ãƒ†ã‚­ã‚¹ãƒˆ |
| `BLOB` | `BLOB` | ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ |
| `DATE` | `DATETIME` | Oracle DATEã¯æ™‚åˆ»å«ã‚€ |
| `TIMESTAMP` | `DATETIME` | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— |
| `RAW(n)` | `VARBINARY(n)` | ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ |

##### AUTO_INCREMENTå¤‰æ›
```sql
-- Oracle
CREATE SEQUENCE user_seq;
CREATE TABLE users (
  id NUMBER DEFAULT user_seq.NEXTVAL PRIMARY KEY
);

â†“ å¤‰æ›

-- MySQL
CREATE TABLE users (
  id BIGINT AUTO_INCREMENT PRIMARY KEY
);
```

##### é–¢æ•°å¤‰æ›
| Oracle | MySQL |
|--------|-------|
| `SYSDATE` | `NOW()` |
| `SYSTIMESTAMP` | `NOW()` |
| `NVL(a,b)` | `IFNULL(a,b)` |
| `ROWNUM` | `LIMITå¥` |

##### å¤‰æ›æ™‚ã®è­¦å‘Š
- **INFO**: æ¨™æº–çš„ãªå¤‰æ›ãŒé©ç”¨ã•ã‚ŒãŸï¼ˆå•é¡Œãªã—ï¼‰
- **WARNING**: å¤‰æ›ã•ã‚ŒãŸãŒå‹•ä½œç¢ºèªæ¨å¥¨
- **ERROR**: è‡ªå‹•å¤‰æ›ä¸å¯ã€æ‰‹å‹•å¯¾å¿œå¿…é ˆ

##### æ‰‹å‹•å¯¾å¿œãŒå¿…è¦ãªã‚±ãƒ¼ã‚¹
1. ã‚¹ãƒˆã‚¢ãƒ‰ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£
2. ãƒˆãƒªã‚¬ãƒ¼
3. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
4. Oracleå›ºæœ‰ã®é–¢æ•°ï¼ˆCONNECT BYç­‰ï¼‰
5. PARTITION BYå¥ã®ä¸€éƒ¨æ§‹æ–‡

### Phase 2: PostgreSQLå¯¾å¿œï¼ˆå°†æ¥æ‹¡å¼µï¼‰
- PostgreSQL â†’ MySQL å¤‰æ›æ©Ÿèƒ½ã®è¿½åŠ 
- ãƒ‡ãƒ¼ã‚¿å‹ãƒãƒƒãƒ”ãƒ³ã‚°æ‹¡å¼µ
- PostgreSQLå›ºæœ‰æ©Ÿèƒ½ã®å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯
