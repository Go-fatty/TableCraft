# TableCraft - ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ‰‹é †

## æ¦‚è¦
TableCraftã¯ã€JSONãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å‹•çš„ã«CRUD APIã¨UIã‚’ç”Ÿæˆã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«é§†å‹•å‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã ã‘ã§ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Spring Boot 2.7.5 (Java)
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React + TypeScript + Vite
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: H2 (ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒª)
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `settings_creates/output/` ã®ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨

## ğŸš€ ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ‰‹é †

### ğŸ¯ ç°¡å˜èµ·å‹• (æ¨å¥¨)

**PowerShellç‰ˆ**:
```powershell
.\start-system.ps1
```

**ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ç‰ˆ**:
```cmd
start-system.bat
```

ä¸Šè¨˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè‡ªå‹•å®Ÿè¡Œã™ã‚‹å†…å®¹ï¼š
1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•ã‚³ãƒ”ãƒ¼
2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ«ãƒ‰ã¨èµ·å‹• (ãƒãƒ¼ãƒˆ8082)
3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®èµ·å‹• (ãƒãƒ¼ãƒˆ5173)
4. èµ·å‹•ç¢ºèªã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º

### ğŸ“‹ æ‰‹å‹•èµ·å‹• (è©³ç´°åˆ¶å¾¡ãŒå¿…è¦ãªå ´åˆ)

### å‰ææ¡ä»¶
- Java 11ä»¥ä¸Š
- Node.js 16ä»¥ä¸Š
- Maven 3.6ä»¥ä¸Š

### 1. æ‰‹å‹•èµ·å‹• - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Spring Boot)

```powershell
# 1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd backend

# 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ (åˆå›ã®ã¿å¿…è¦)
Copy-Item "..\settings_creates\output\frontend\*" "src\main\resources" -Force

# 3. ãƒ“ãƒ«ãƒ‰
mvn clean package -q

# 4. èµ·å‹• (ãƒãƒ¼ãƒˆ8082ã§èµ·å‹•)
Start-Process -WindowStyle Hidden -FilePath "java" -ArgumentList "-jar","target\tablecraft-backend-0.0.1-SNAPSHOT.jar","--spring.profiles.active=dev","--server.port=8082"
```

**èµ·å‹•ç¢ºèª**:
```powershell
# ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ç¢ºèª
Invoke-WebRequest -Uri "http://localhost:8082/api/sql/tables" -Method POST -ContentType "application/json" -Body "{}" | ConvertFrom-Json
```

### 2. æ‰‹å‹•èµ·å‹• - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (React + Vite)

```powershell
# 1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd frontend

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (åˆå›ã®ã¿)
npm install

# 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev
```

### 3. ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: http://localhost:5173
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: http://localhost:8082
- **H2ã‚³ãƒ³ã‚½ãƒ¼ãƒ«**: http://localhost:8082/h2-console
  - JDBC URL: `jdbc:h2:mem:testdb`
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼å: `sa`
  - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `password`

**ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç¢ºèª**:
```powershell
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®å‹•ä½œç¢ºèª
Invoke-WebRequest -Uri "http://localhost:8082/api/sql/tables" -Method POST -ContentType "application/json" -Body "{}" | ConvertFrom-Json

# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ç¢ºèª
netstat -ano | findstr :8082  # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
netstat -ano | findstr :5173  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```

## ğŸ“‹ åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ¼ãƒ–ãƒ«

**PowerShellç‰ˆ**:
```powershell
.\stop-system.ps1
```

**æ‰‹å‹•åœæ­¢**:
```powershell
# Javaãƒ—ãƒ­ã‚»ã‚¹ã®å¼·åˆ¶çµ‚äº†
taskkill /F /IM java.exe

# Node.jsãƒ—ãƒ­ã‚»ã‚¹ã®å¼·åˆ¶çµ‚äº†
taskkill /F /IM node.exe

# ã¾ãŸã¯Ctrl+Cã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’åœæ­¢
```

## ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–

ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ™‚ã«ä»¥ä¸‹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè‡ªå‹•ä½œæˆã•ã‚Œã¾ã™ï¼š

| ãƒ†ãƒ¼ãƒ–ãƒ«å | èª¬æ˜ | ä¸»ã‚­ãƒ¼ |
|-----------|------|--------|
| users | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† | id (BIGINT) |
| categories | ã‚«ãƒ†ã‚´ãƒªç®¡ç† | id (BIGINT) |
| products | å•†å“ç®¡ç† | id (BIGINT) |
| order_details | æ³¨æ–‡è©³ç´° | order_id, product_id (è¤‡åˆ) |

## ğŸ”§ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### åŸºæœ¬CRUDæ“ä½œ
- `POST /api/sql/tables` - ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§å–å¾—
- `POST /api/sql/schema` - ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚­ãƒ¼ãƒå–å¾—
- `POST /api/sql/findAll` - ãƒ‡ãƒ¼ã‚¿å…¨ä»¶å–å¾—
- `POST /api/sql/create` - ãƒ‡ãƒ¼ã‚¿æ–°è¦ä½œæˆ
- `POST /api/sql/update` - ãƒ‡ãƒ¼ã‚¿æ›´æ–°
- `POST /api/sql/delete` - ãƒ‡ãƒ¼ã‚¿å‰Šé™¤

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
- `POST /api/sql/config/table-config` - ãƒ†ãƒ¼ãƒ–ãƒ«è¨­å®š
- `POST /api/sql/config/validation-config` - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
- `POST /api/sql/config/ui-config` - UIè¨­å®š

## ğŸ›  ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆ
```powershell
# ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
netstat -ano | findstr :8082

# ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†
taskkill /F /PID [PIDç•ªå·]
```

### Javaãƒ—ãƒ­ã‚»ã‚¹ã®å¼·åˆ¶çµ‚äº†
```powershell
taskkill /F /IM java.exe
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†ã‚³ãƒ”ãƒ¼
```powershell
cd backend
Copy-Item "..\settings_creates\output\frontend\*" "src\main\resources" -Force
```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
TableCraft/
â”œâ”€â”€ README.md                          # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ start-system.ps1                  # ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (PowerShell)
â”œâ”€â”€ start-system.bat                  # ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (ãƒãƒƒãƒ)
â”œâ”€â”€ stop-system.ps1                   # ã‚·ã‚¹ãƒ†ãƒ åœæ­¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ backend/                           # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Spring Boot)
â”‚   â”œâ”€â”€ pom.xml                       # Mavenè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ src/main/java/com/tablecraft/app/
â”‚   â”‚   â”œâ”€â”€ Application.java           # ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â””â”€â”€ dynamic/
â”‚   â”‚       â”œâ”€â”€ SqlBasedController.java    # REST API ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â”‚   â”‚       â”œâ”€â”€ SqlBasedTableService.java  # ãƒ†ãƒ¼ãƒ–ãƒ«æ“ä½œã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚       â””â”€â”€ FieldDefinition.java       # ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ application.properties     # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ table-definitions.sql      # ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©SQL
â”‚   â”‚   â”œâ”€â”€ table-config.json         # ãƒ†ãƒ¼ãƒ–ãƒ«è¨­å®š (settings_createsã‹ã‚‰)
â”‚   â”‚   â”œâ”€â”€ validation-config.json    # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”‚   â”‚   â”œâ”€â”€ ui-config.json            # UIè¨­å®š
â”‚   â”‚   â”œâ”€â”€ types.ts                  # TypeScriptå‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ useTable.ts               # React ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ messages_*.properties     # å¤šè¨€èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ target/                       # ãƒ“ãƒ«ãƒ‰æˆæœç‰©
â”œâ”€â”€ frontend/                         # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (React + Vite)
â”‚   â”œâ”€â”€ package.json                  # Node.jsä¾å­˜é–¢ä¿‚
â”‚   â”œâ”€â”€ vite.config.ts               # Viteè¨­å®š
â”‚   â”œâ”€â”€ tsconfig.json                # TypeScriptè¨­å®š
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx                   # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ main.tsx                  # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout/               # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ Forms/                # ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ Tables/               # ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useTable.ts           # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â””â”€â”€ generated.ts          # ç”Ÿæˆã•ã‚ŒãŸå‹å®šç¾©
â”‚   â””â”€â”€ public/                       # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ settings_creates/                 # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆãƒ„ãƒ¼ãƒ«
    â”œâ”€â”€ requirements.txt              # Pythonä¾å­˜é–¢ä¿‚
    â”œâ”€â”€ src/                          # ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    â”‚   â”œâ”€â”€ generator.py              # ãƒ¡ã‚¤ãƒ³ç”Ÿæˆå™¨
    â”‚   â”œâ”€â”€ frontend_generator.py     # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­å®šç”Ÿæˆ
    â”‚   â”œâ”€â”€ properties_generator.py   # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
    â”‚   â””â”€â”€ sql_generator.py          # SQLç”Ÿæˆ
    â”œâ”€â”€ examples/
    â”‚   â””â”€â”€ table-metadata.json       # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¾‹
    â””â”€â”€ output/                       # ç”Ÿæˆã•ã‚ŒãŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
        â”œâ”€â”€ frontend/                 # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨è¨­å®š
        â”œâ”€â”€ properties/               # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ•ã‚¡ã‚¤ãƒ«
        â””â”€â”€ sql/                      # SQL ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ“ é–‹ç™ºãƒ¡ãƒ¢

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°æ™‚ã®æ‰‹é †
1. `settings_creates`ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†ç”Ÿæˆ
2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’Spring Bootã®resourcesã«ã‚³ãƒ”ãƒ¼
3. Spring Bootã‚’å†èµ·å‹•

### æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ æ™‚
1. `settings_creates/examples/table-metadata.json`ã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©
2. `settings_creates`ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†ç”Ÿæˆ
3. ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¦å†èµ·å‹•

## ğŸ¯ æ©Ÿèƒ½æ¦‚è¦

- **å‹•çš„ãƒ†ãƒ¼ãƒ–ãƒ«ç®¡ç†**: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã§ãƒ†ãƒ¼ãƒ–ãƒ«æ“ä½œ
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ CRUD**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®å³åº§ãªæ“ä½œ
- **å¤šè¨€èªå¯¾å¿œ**: æ—¥æœ¬èª/è‹±èªåˆ‡ã‚Šæ›¿ãˆå¯¾å¿œ
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®å…¥åŠ›æ¤œè¨¼
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UI**: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œæ¸ˆã¿

---

**ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ**:
1. `start-system.ps1` ã¾ãŸã¯ `start-system.bat` ã‚’å®Ÿè¡Œ
2. ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå‹•èµ·å‹• (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: 8082, ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: 5173)
3. ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã«ã‚¢ã‚¯ã‚»ã‚¹