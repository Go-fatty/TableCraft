# table-metadata.json è¨­å®šã‚¬ã‚¤ãƒ‰

## æ¦‚è¦
`table-metadata.json`ã¯ã€å‹•çš„CRUDã‚·ã‚¹ãƒ†ãƒ ã®å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`json_create/output/`ãƒ•ã‚©ãƒ«ãƒ€ã«å„ç¨®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

## å®Ÿè¡Œãƒ•ãƒ­ãƒ¼
1. `table-metadata.json` ã‚’ç·¨é›†ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ãƒ»UIè¨­å®šãªã©ï¼‰
2. Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ â†’ `output/` ãƒ•ã‚©ãƒ«ãƒ€ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
3. ã‚·ã‚¹ãƒ†ãƒ èµ·å‹• â†’ ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§å‹•ä½œ

---

## åŸºæœ¬æ§‹é€ 

```json
{
  "project": { ... },     // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
  "database": { ... },    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
  "tables": { ... },      // ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ï¼ˆãƒ¡ã‚¤ãƒ³éƒ¨åˆ†ï¼‰
  "ui": { ... }           // UIè¨­å®š
}
```

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

```json
{
  "project": {
    "name": "AutoStack Builder Sample",    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
    "version": "1.0.0",                   // ãƒãƒ¼ã‚¸ãƒ§ãƒ³
    "defaultLanguage": "ja",              // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èª
    "supportedLanguages": ["ja", "en"]    // ã‚µãƒãƒ¼ãƒˆè¨€èª
  }
}
```

| é …ç›® | å¿…é ˆ | èª¬æ˜ |
|------|------|------|
| `name` | âœ… | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼ˆè¡¨ç¤ºç”¨ï¼‰ |
| `version` | âœ… | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå· |
| `defaultLanguage` | âœ… | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤ºè¨€èªï¼ˆja/enï¼‰ |
| `supportedLanguages` | âœ… | ã‚µãƒãƒ¼ãƒˆã™ã‚‹è¨€èªãƒªã‚¹ãƒˆ |

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š

```json
{
  "database": {
    "type": "mysql",                                // DBç¨®é¡
    "dialect": "org.hibernate.dialect.MySQL8Dialect", // Hibernateãƒ€ã‚¤ã‚¢ãƒ¬ã‚¯ãƒˆ
    "defaultTimezone": "Asia/Tokyo"                  // ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³
  }
}
```

| é …ç›® | å¿…é ˆ | èª¬æ˜ |
|------|------|------|
| `type` | âœ… | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¨®é¡ï¼ˆmysql/postgresqlï¼‰ |
| `dialect` | âœ… | Hibernateãƒ€ã‚¤ã‚¢ãƒ¬ã‚¯ãƒˆ |
| `defaultTimezone` | â­• | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ |

---

## ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

### ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

```json
{
  "tables": {
    "users": {                    // ãƒ†ãƒ¼ãƒ–ãƒ«å
      "metadata": {
        "icon": "ğŸ‘¤",             // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚¢ã‚¤ã‚³ãƒ³
        "color": "#4A90E2",       // ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼
        "sortOrder": 1,           // è¡¨ç¤ºé †åº
        "category": "user_management",  // ã‚«ãƒ†ã‚´ãƒª
        "labels": {
          "ja": "ãƒ¦ãƒ¼ã‚¶ãƒ¼",       // æ—¥æœ¬èªãƒ©ãƒ™ãƒ«
          "en": "Users"           // è‹±èªãƒ©ãƒ™ãƒ«
        },
        "description": {
          "ja": "ã‚·ã‚¹ãƒ†ãƒ åˆ©ç”¨è€…ã®ç®¡ç†",
          "en": "System user management"
        }
      }
    }
  }
}
```

| é …ç›® | å¿…é ˆ | èª¬æ˜ |
|------|------|------|
| `icon` | â­• | ã‚µã‚¤ãƒ‰ãƒãƒ¼è¡¨ç¤ºã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—æ¨å¥¨ï¼‰ |
| `color` | â­• | ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ï¼ˆ#RRGGBBå½¢å¼ï¼‰ |
| `sortOrder` | â­• | ã‚µã‚¤ãƒ‰ãƒãƒ¼è¡¨ç¤ºé †åº |
| `category` | â­• | ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ |
| `labels` | âœ… | è¡¨ç¤ºåï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰ |
| `description` | â­• | èª¬æ˜æ–‡ï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰ |

### ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼è¨­å®š

#### å˜ä¸€ä¸»ã‚­ãƒ¼ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
```json
{
  // primaryKeyã®è¨­å®šãŒç„¡ã„å ´åˆã€è‡ªå‹•çš„ã«å˜ä¸€ä¸»ã‚­ãƒ¼æ‰±ã„
  "columns": {
    "id": {
      "constraints": {
        "primaryKey": true,
        "autoIncrement": true
      }
    }
  }
}
```

#### è¤‡åˆä¸»ã‚­ãƒ¼
```json
{
  "primaryKey": {
    "type": "composite",
    "columns": ["order_id", "product_id"]
  },
  "columns": {
    "order_id": {
      "constraints": {
        "primaryKey": true,
        "nullable": false
      }
    },
    "product_id": {
      "constraints": {
        "primaryKey": true,
        "nullable": false
      }
    }
  }
}
```

### ã‚«ãƒ©ãƒ å®šç¾©

```json
{
  "columns": {
    "ã‚«ãƒ©ãƒ å": {
      "type": "ãƒ‡ãƒ¼ã‚¿å‹",
      "length": æ–‡å­—æ•°,         // VARCHARç”¨
      "precision": ç²¾åº¦,        // DECIMALç”¨
      "scale": å°æ•°ç‚¹æ¡æ•°,      // DECIMALç”¨
      "constraints": { ... },   // åˆ¶ç´„
      "labels": { ... },        // ãƒ©ãƒ™ãƒ«
      "ui": { ... },           // UIè¨­å®š
      "validation": { ... },    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      "foreignKey": { ... }     // å¤–éƒ¨ã‚­ãƒ¼
    }
  }
}
```

#### ãƒ‡ãƒ¼ã‚¿å‹ä¸€è¦§

| å‹ | èª¬æ˜ | è¿½åŠ å±æ€§ | ä¾‹ |
|---|------|---------|-----|
| `VARCHAR` | å¯å¤‰æ–‡å­—åˆ— | `length` | `"type": "VARCHAR", "length": 100` |
| `TEXT` | é•·æ–‡ãƒ†ã‚­ã‚¹ãƒˆ | - | `"type": "TEXT"` |
| `INT` | æ•´æ•° | - | `"type": "INT"` |
| `BIGINT` | é•·æ•´æ•° | - | `"type": "BIGINT"` |
| `DECIMAL` | å°æ•° | `precision`, `scale` | `"type": "DECIMAL", "precision": 10, "scale": 2` |
| `BOOLEAN` | çœŸå½å€¤ | - | `"type": "BOOLEAN"` |
| `DATE` | æ—¥ä»˜ | - | `"type": "DATE"` |
| `DATETIME` | æ—¥æ™‚ | - | `"type": "DATETIME"` |

#### åˆ¶ç´„è¨­å®š

```json
{
  "constraints": {
    "primaryKey": true,         // ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼
    "autoIncrement": true,      // è‡ªå‹•æ¡ç•ª
    "nullable": false,          // NULLè¨±å¯
    "unique": true,             // ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„
    "default": "å€¤"             // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
  }
}
```

| åˆ¶ç´„ | å‹ | èª¬æ˜ |
|------|-----|------|
| `primaryKey` | boolean | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã‹ã©ã†ã‹ |
| `autoIncrement` | boolean | è‡ªå‹•æ¡ç•ªã™ã‚‹ã‹ |
| `nullable` | boolean | NULLã‚’è¨±å¯ã™ã‚‹ã‹ |
| `unique` | boolean | ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ |
| `default` | string | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆ"0", "true", "CURRENT_TIMESTAMP"ãªã©ï¼‰ |

#### å¤–éƒ¨ã‚­ãƒ¼è¨­å®š

```json
{
  "foreignKey": {
    "table": "categories",        // å‚ç…§å…ˆãƒ†ãƒ¼ãƒ–ãƒ«
    "column": "id",              // å‚ç…§å…ˆã‚«ãƒ©ãƒ 
    "displayColumn": "name",     // è¡¨ç¤ºç”¨ã‚«ãƒ©ãƒ 
    "onDelete": "SET NULL",      // å‰Šé™¤æ™‚å‹•ä½œ
    "onUpdate": "CASCADE"        // æ›´æ–°æ™‚å‹•ä½œ
  }
}
```

| é …ç›® | å¿…é ˆ | èª¬æ˜ |
|------|------|------|
| `table` | âœ… | å‚ç…§å…ˆãƒ†ãƒ¼ãƒ–ãƒ«å |
| `column` | âœ… | å‚ç…§å…ˆã‚«ãƒ©ãƒ å |
| `displayColumn` | âœ… | ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã«è¡¨ç¤ºã™ã‚‹ã‚«ãƒ©ãƒ å |
| `onDelete` | â­• | å‰Šé™¤æ™‚ã®å‹•ä½œï¼ˆCASCADE/SET NULL/RESTRICTï¼‰ |
| `onUpdate` | â­• | æ›´æ–°æ™‚ã®å‹•ä½œï¼ˆCASCADE/SET NULL/RESTRICTï¼‰ |

##### å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚ªãƒ—ã‚·ãƒ§ãƒ³è©³ç´°

###### onDeleteï¼ˆå‰Šé™¤æ™‚ã®å‹•ä½œï¼‰

| å€¤ | èª¬æ˜ | å‹•ä½œä¾‹ |
|---|------|--------|
| `CASCADE` | å‚ç…§å…ƒã‚‚ä¸€ç·’ã«å‰Šé™¤ | ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’å‰Šé™¤ â†’ ãã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®å•†å“ã‚‚å…¨ã¦å‰Šé™¤ |
| `SET NULL` | å‚ç…§å…ƒã‚’NULLã«è¨­å®š | ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’å‰Šé™¤ â†’ å•†å“ã®category_idã‚’NULLã«è¨­å®š |
| `RESTRICT` | å‚ç…§å…ƒãŒã‚ã‚‹å ´åˆã¯å‰Šé™¤ã‚’æ‹’å¦ | ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’å‰Šé™¤ã—ã‚ˆã†ã¨ã—ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã§æ‹’å¦ã•ã‚Œã‚‹ |
| `NO ACTION` | RESTRICT ã¨åŒã˜ | å‰Šé™¤ã‚’æ‹’å¦ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¾å­˜ï¼‰ |

###### onUpdateï¼ˆæ›´æ–°æ™‚ã®å‹•ä½œï¼‰

| å€¤ | èª¬æ˜ | å‹•ä½œä¾‹ |
|---|------|--------|
| `CASCADE` | å‚ç…§å…ƒã‚‚ä¸€ç·’ã«æ›´æ–° | ã‚«ãƒ†ã‚´ãƒªãƒ¼IDã‚’å¤‰æ›´ â†’ å•†å“ã®category_idã‚‚è‡ªå‹•æ›´æ–° |
| `SET NULL` | å‚ç…§å…ƒã‚’NULLã«è¨­å®š | ã‚«ãƒ†ã‚´ãƒªãƒ¼IDã‚’å¤‰æ›´ â†’ å•†å“ã®category_idã‚’NULLã«è¨­å®š |
| `RESTRICT` | å‚ç…§å…ƒãŒã‚ã‚‹å ´åˆã¯æ›´æ–°ã‚’æ‹’å¦ | ã‚«ãƒ†ã‚´ãƒªãƒ¼IDã‚’å¤‰æ›´ã—ã‚ˆã†ã¨ã—ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã§æ‹’å¦ |
| `NO ACTION` | RESTRICT ã¨åŒã˜ | æ›´æ–°ã‚’æ‹’å¦ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¾å­˜ï¼‰ |

###### è¨­å®šã®æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³

```json
// ãƒ‘ã‚¿ãƒ¼ãƒ³1: è¦ªå‰Šé™¤æ™‚ã¯å­ã‚‚ã¾ã¨ã‚ã¦å‰Šé™¤ï¼ˆæ³¨æ–‡â†’æ³¨æ–‡æ˜ç´°ãªã©ï¼‰
{
  "onDelete": "CASCADE",
  "onUpdate": "CASCADE"
}

// ãƒ‘ã‚¿ãƒ¼ãƒ³2: è¦ªå‰Šé™¤æ™‚ã¯å­ã¯æ®‹ã™ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ¼â†’å•†å“ãªã©ï¼‰
{
  "onDelete": "SET NULL", 
  "onUpdate": "CASCADE"
}

// ãƒ‘ã‚¿ãƒ¼ãƒ³3: è¦ªã¯å‰Šé™¤ã•ã›ãªã„ï¼ˆé‡è¦ãªãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ãªã©ï¼‰
{
  "onDelete": "RESTRICT",
  "onUpdate": "CASCADE"
}
```

###### æ³¨æ„äº‹é …

âš ï¸ **CASCADEä½¿ç”¨æ™‚ã®æ³¨æ„**
- `onDelete: "CASCADE"`ã¯æ…é‡ã«ä½¿ç”¨ã—ã¦ãã ã•ã„
- æ„å›³ã—ãªã„å¤§é‡ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- ãƒ†ãƒ¼ãƒ–ãƒ«é–“ã®é–¢ä¿‚æ€§ã‚’ååˆ†ç†è§£ã—ã¦ã‹ã‚‰è¨­å®šã—ã¦ãã ã•ã„

âœ… **å®‰å…¨ãªè¨­å®š**
- é€šå¸¸ã¯ `SET NULL` ã¾ãŸã¯ `RESTRICT` ã‚’æ¨å¥¨
- `CASCADE`ã¯è¦ªå­é–¢ä¿‚ãŒæ˜ç¢ºãªå ´åˆã®ã¿ä½¿ç”¨

#### UIè¨­å®š

```json
{
  "ui": {
    "hidden": true,               // ãƒ•ã‚©ãƒ¼ãƒ ã§éè¡¨ç¤º
    "readonly": true,             // èª­ã¿å–ã‚Šå°‚ç”¨
    "inputType": "text",          // å…¥åŠ›ã‚¿ã‚¤ãƒ—
    "placeholder": {              // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
      "ja": "æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
      "en": "Enter your name"
    },
    "min": 0,                     // æœ€å°å€¤ï¼ˆnumberç”¨ï¼‰
    "max": 150,                   // æœ€å¤§å€¤ï¼ˆnumberç”¨ï¼‰
    "step": "0.01",              // ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆnumberç”¨ï¼‰
    "rows": 3,                    // è¡Œæ•°ï¼ˆtextareaç”¨ï¼‰
    "allowNull": true,            // NULLè¨±å¯ï¼ˆselectç”¨ï¼‰
    "nullLabel": {                // NULLæ™‚ãƒ©ãƒ™ãƒ«ï¼ˆselectç”¨ï¼‰
      "ja": "é¸æŠãªã—",
      "en": "None"
    },
    "suffix": "å††"                // å¾Œç½®æ–‡å­—ï¼ˆè¡¨ç¤ºç”¨ï¼‰
  }
}
```

##### inputTypeä¸€è¦§

| type | èª¬æ˜ | å¯¾å¿œãƒ‡ãƒ¼ã‚¿å‹ | è¿½åŠ å±æ€§ |
|------|------|-------------|---------|
| `text` | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | VARCHAR, TEXT | placeholder |
| `email` | ãƒ¡ãƒ¼ãƒ«å…¥åŠ› | VARCHAR | placeholder |
| `tel` | é›»è©±ç•ªå· | VARCHAR | placeholder |
| `number` | æ•°å€¤å…¥åŠ› | INT, BIGINT, DECIMAL | min, max, step |
| `date` | æ—¥ä»˜é¸æŠ | DATE | - |
| `datetime-local` | æ—¥æ™‚é¸æŠ | DATETIME | - |
| `checkbox` | ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ | BOOLEAN | - |
| `textarea` | è¤‡æ•°è¡Œãƒ†ã‚­ã‚¹ãƒˆ | TEXT | rows, placeholder |
| `select` | ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³é¸æŠ | å¤–éƒ¨ã‚­ãƒ¼ | allowNull, nullLabel |

#### Autofillè¨­å®šï¼ˆè‡ªå‹•å…¥åŠ›ï¼‰

å¤–éƒ¨ã‚­ãƒ¼å‚ç…§å…ˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•å–å¾—ã—ã¦ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¨­å®šã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

```json
{
  "autofill": {
    "enabled": true,              // æ©Ÿèƒ½ã®æœ‰åŠ¹/ç„¡åŠ¹
    "sourceTable": "products",    // ãƒ‡ãƒ¼ã‚¿å–å¾—å…ƒãƒ†ãƒ¼ãƒ–ãƒ«
    "sourceColumn": "id",         // æ¤œç´¢ã‚­ãƒ¼
    "mappings": [                 // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°
      {
        "from": "price",          // å–å¾—å…ƒã‚«ãƒ©ãƒ 
        "to": "unit_price",       // è¨­å®šå…ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
        "overwritable": true      // ä¸Šæ›¸ãè¨±å¯
      }
    ]
  }
}
```

**ä½¿ç”¨ä¾‹: å•†å“é¸æŠæ™‚ã«å˜ä¾¡ã‚’è‡ªå‹•è¨­å®š**

```json
{
  "name": "product_id",
  "type": "select",
  "foreignKey": {
    "table": "products",
    "column": "id",
    "displayColumn": "name"
  },
  "autofill": {
    "enabled": true,
    "sourceTable": "products",
    "sourceColumn": "id",
    "mappings": [
      {
        "from": "price",
        "to": "_product_base_price",
        "overwritable": true
      }
    ]
  }
}
```

**å‹•ä½œãƒ•ãƒ­ãƒ¼:**
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå•†å“ã‚’é¸æŠ
2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API `/api/config/data/products/{id}` ã‚’å‘¼ã³å‡ºã—
3. å•†å“ãƒ‡ãƒ¼ã‚¿å–å¾—
4. `price`ã®å€¤ã‚’`_product_base_price`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è‡ªå‹•è¨­å®š

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å¿…é ˆ | èª¬æ˜ |
|-----------|------|------|
| `enabled` | âœ… | æ©Ÿèƒ½ã®æœ‰åŠ¹/ç„¡åŠ¹ |
| `sourceTable` | âœ… | ãƒ‡ãƒ¼ã‚¿å–å¾—å…ƒãƒ†ãƒ¼ãƒ–ãƒ«å |
| `sourceColumn` | âœ… | æ¤œç´¢ã«ä½¿ç”¨ã™ã‚‹ã‚«ãƒ©ãƒ  |
| `mappings` | âœ… | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°é…åˆ— |
| `from` | âœ… | å–å¾—å…ƒã‚«ãƒ©ãƒ å |
| `to` | âœ… | è¨­å®šå…ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å |
| `overwritable` | â­• | æ—¢å­˜å€¤ã®ä¸Šæ›¸ãè¨±å¯ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: trueï¼‰ |

#### AutoCalculateè¨­å®šï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰

ãƒ•ã‚©ãƒ¼ãƒ å†…ã§è¨ˆç®—å¼ã‚’å®Ÿè¡Œã—ã€çµæœã‚’åˆ¥ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è‡ªå‹•è¨­å®šã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

```json
{
  "autoCalculate": {
    "enabled": true,                              // æ©Ÿèƒ½ã®æœ‰åŠ¹/ç„¡åŠ¹
    "formula": "_product_base_price * quantity",  // è¨ˆç®—å¼
    "targetField": "unit_price",                  // çµæœè¨­å®šå…ˆ
    "triggerFields": ["quantity", "_product_base_price"]  // ãƒˆãƒªã‚¬ãƒ¼
  }
}
```

**ä½¿ç”¨ä¾‹: æ•°é‡Ã—å˜ä¾¡ã®è‡ªå‹•è¨ˆç®—**

```json
{
  "name": "quantity",
  "type": "number",
  "autoCalculate": {
    "enabled": true,
    "formula": "_product_base_price * quantity",
    "targetField": "unit_price",
    "triggerFields": ["quantity", "_product_base_price"]
  }
}
```

**å‹•ä½œãƒ•ãƒ­ãƒ¼:**
1. `quantity`ã¾ãŸã¯`_product_base_price`ã®å€¤ãŒå¤‰æ›´ã•ã‚Œã‚‹
2. è¨ˆç®—å¼ã‚’è©•ä¾¡: `_product_base_price * quantity`
3. çµæœã‚’`unit_price`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è‡ªå‹•è¨­å®š

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å¿…é ˆ | èª¬æ˜ |
|-----------|------|------|
| `enabled` | âœ… | æ©Ÿèƒ½ã®æœ‰åŠ¹/ç„¡åŠ¹ |
| `formula` | âœ… | è¨ˆç®—å¼ï¼ˆJavaScriptå¼ï¼‰ |
| `targetField` | âœ… | è¨ˆç®—çµæœã‚’è¨­å®šã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å |
| `triggerFields` | âœ… | è¨ˆç®—ã‚’å†å®Ÿè¡Œã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |

**è¨ˆç®—å¼ã®è¨˜è¿°ä¾‹:**

```javascript
// å˜ç´”ãªä¹—ç®—
"formula": "quantity * price"

// æ‹¬å¼§ã‚’ä½¿ã£ãŸè¨ˆç®—
"formula": "(price * quantity) * (1 + tax_rate / 100)"

// å‰²å¼•è¨ˆç®—
"formula": "price * (1 - discount_rate / 100)"
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£:** è¨ˆç®—å¼ã¯æ•°å€¤ã¨æ¼”ç®—å­ï¼ˆ`+`, `-`, `*`, `/`, `(`, `)`ï¼‰ã®ã¿è¨±å¯ã•ã‚Œã¾ã™ã€‚

#### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

```json
{
  "validation": {
    "required": true,             // å¿…é ˆãƒã‚§ãƒƒã‚¯
    "minLength": 2,              // æœ€å°æ–‡å­—æ•°
    "maxLength": 100,            // æœ€å¤§æ–‡å­—æ•°
    "min": 0,                    // æœ€å°å€¤
    "max": 999999,               // æœ€å¤§å€¤
    "pattern": "email"           // ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆemail ã¾ãŸã¯ æ­£è¦è¡¨ç¾ï¼‰
  }
}
```

| ãƒ«ãƒ¼ãƒ« | å‹ | èª¬æ˜ | å¯¾å¿œãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
|--------|-----|------|-------------|
| `required` | boolean | å¿…é ˆå…¥åŠ› | å…¨ã¦ |
| `minLength` | number | æœ€å°æ–‡å­—æ•° | ãƒ†ã‚­ã‚¹ãƒˆç³» |
| `maxLength` | number | æœ€å¤§æ–‡å­—æ•° | ãƒ†ã‚­ã‚¹ãƒˆç³» |
| `min` | number | æœ€å°å€¤ | æ•°å€¤ç³» |
| `max` | number | æœ€å¤§å€¤ | æ•°å€¤ç³» |
| `pattern` | string | ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒï¼ˆ"email"ã¾ãŸã¯æ­£è¦è¡¨ç¾ï¼‰ | ãƒ†ã‚­ã‚¹ãƒˆç³» |

---

## UIè¨­å®š

```json
{
  "ui": {
    "theme": {
      "primary": "#4A90E2",       // ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼
      "secondary": "#E67E22",     // ã‚»ã‚«ãƒ³ãƒ€ãƒªã‚«ãƒ©ãƒ¼
      "success": "#27AE60",       // æˆåŠŸã‚«ãƒ©ãƒ¼
      "warning": "#F39C12",       // è­¦å‘Šã‚«ãƒ©ãƒ¼
      "danger": "#E74C3C",        // å±é™ºã‚«ãƒ©ãƒ¼
      "info": "#3498DB"           // æƒ…å ±ã‚«ãƒ©ãƒ¼
    },
    "sidebar": {
      "width": "280px",           // ã‚µã‚¤ãƒ‰ãƒãƒ¼å¹…
      "backgroundColor": "#2C3E50", // èƒŒæ™¯è‰²
      "textColor": "#ECF0F1"      // ãƒ†ã‚­ã‚¹ãƒˆè‰²
    },
    "pagination": {
      "defaultPageSize": 20,      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º
      "pageSizeOptions": [10, 20, 50, 100]  // ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚ºé¸æŠè‚¢
    }
  }
}
```

---

## ã‚ˆãä½¿ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. åŸºæœ¬çš„ãªãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```json
{
  "name": {
    "type": "VARCHAR",
    "length": 100,
    "constraints": {
      "nullable": false
    },
    "labels": {
      "ja": "æ°å",
      "en": "Name"
    },
    "ui": {
      "inputType": "text",
      "placeholder": {
        "ja": "æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
        "en": "Enter your name"
      }
    },
    "validation": {
      "required": true,
      "minLength": 2,
      "maxLength": 100
    }
  }
}
```

### 2. å¤–éƒ¨ã‚­ãƒ¼å‚ç…§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```json
{
  "category_id": {
    "type": "BIGINT",
    "constraints": {
      "nullable": true
    },
    "labels": {
      "ja": "ã‚«ãƒ†ã‚´ãƒªãƒ¼",
      "en": "Category"
    },
    "foreignKey": {
      "table": "categories",
      "column": "id",
      "displayColumn": "name",
      "onDelete": "SET NULL",
      "onUpdate": "CASCADE"
    },
    "ui": {
      "inputType": "select",
      "allowNull": true,
      "nullLabel": {
        "ja": "ã‚«ãƒ†ã‚´ãƒªãƒ¼ãªã—",
        "en": "No Category"
      }
    }
  }
}
```

### 3. ä¾¡æ ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```json
{
  "price": {
    "type": "DECIMAL",
    "precision": 10,
    "scale": 2,
    "constraints": {
      "nullable": false
    },
    "labels": {
      "ja": "ä¾¡æ ¼",
      "en": "Price"
    },
    "ui": {
      "inputType": "number",
      "step": "0.01",
      "min": 0,
      "suffix": "å††"
    },
    "validation": {
      "required": true,
      "min": 0
    }
  }
}
```

### 4. ãƒ–ãƒ¼ãƒ«å€¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```json
{
  "is_active": {
    "type": "BOOLEAN",
    "constraints": {
      "nullable": false,
      "default": "true"
    },
    "labels": {
      "ja": "æœ‰åŠ¹",
      "en": "Active"
    },
    "ui": {
      "inputType": "checkbox"
    }
  }
}
```

### 5. æ—¥æ™‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

```json
{
  "created_date": {
    "type": "DATETIME",
    "constraints": {
      "nullable": false,
      "default": "CURRENT_TIMESTAMP"
    },
    "labels": {
      "ja": "ä½œæˆæ—¥æ™‚",
      "en": "Created Date"
    },
    "ui": {
      "hidden": true,
      "readonly": true
    }
  }
}
```

### 6. è¤‡æ•°è¡Œãƒ†ã‚­ã‚¹ãƒˆ

```json
{
  "description": {
    "type": "TEXT",
    "constraints": {
      "nullable": true
    },
    "labels": {
      "ja": "èª¬æ˜",
      "en": "Description"
    },
    "ui": {
      "inputType": "textarea",
      "rows": 4,
      "placeholder": {
        "ja": "èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
        "en": "Enter description"
      }
    }
  }
}
```

### 7. Autofill + AutoCalculateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå•†å“é¸æŠâ†’å˜ä¾¡å–å¾—â†’é‡‘é¡è¨ˆç®—ï¼‰

ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€æ³¨æ–‡æ˜ç´°ã®ã‚ˆã†ãªè¤‡åˆã‚­ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ã§éå¸¸ã«æœ‰åŠ¹ã§ã™ã€‚

```json
{
  "order_details": {
    "columns": {
      "order_id": {
        "type": "BIGINT",
        "constraints": {
          "primaryKey": true,
          "autoIncrement": true,
          "nullable": false
        },
        "labels": {
          "ja": "æ³¨æ–‡ID",
          "en": "Order ID"
        },
        "ui": {
          "hidden": true,
          "readonly": true
        }
      },
      "product_id": {
        "type": "BIGINT",
        "constraints": {
          "primaryKey": true,
          "nullable": false
        },
        "labels": {
          "ja": "å•†å“",
          "en": "Product"
        },
        "foreignKey": {
          "table": "products",
          "column": "id",
          "displayColumn": "name",
          "onDelete": "CASCADE",
          "onUpdate": "CASCADE"
        },
        "ui": {
          "inputType": "select",
          "allowNull": true,
          "nullLabel": {
            "ja": "å•†å“ã‚’é¸æŠã—ã¦ãã ã•ã„",
            "en": "Select a product"
          }
        },
        "autofill": {
          "enabled": true,
          "sourceTable": "products",
          "sourceColumn": "id",
          "mappings": [
            {
              "from": "price",
              "to": "_product_base_price",
              "overwritable": true
            }
          ]
        }
      },
      "quantity": {
        "type": "INT",
        "constraints": {
          "nullable": false
        },
        "labels": {
          "ja": "æ•°é‡",
          "en": "Quantity"
        },
        "ui": {
          "inputType": "number",
          "min": 1,
          "placeholder": {
            "ja": "æ•°é‡ã‚’å…¥åŠ›",
            "en": "Enter quantity"
          }
        },
        "validation": {
          "required": true,
          "min": 1
        },
        "autoCalculate": {
          "enabled": true,
          "formula": "_product_base_price * quantity",
          "targetField": "unit_price",
          "triggerFields": ["quantity", "_product_base_price"]
        }
      },
      "unit_price": {
        "type": "DECIMAL",
        "precision": 10,
        "scale": 2,
        "constraints": {
          "nullable": false
        },
        "labels": {
          "ja": "é‡‘é¡ï¼ˆæ•°é‡Ã—å˜ä¾¡ï¼‰",
          "en": "Total Amount"
        },
        "ui": {
          "inputType": "number",
          "readonly": true
        }
      }
    }
  }
}
```

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼:**
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå•†å“ã‚’é¸æŠï¼ˆproduct_idï¼‰
2. **Autofill**: å•†å“ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰å˜ä¾¡ã‚’å–å¾—ã—ã€`_product_base_price`ã«è¨­å®š
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ•°é‡ã‚’å…¥åŠ›ï¼ˆquantityï¼‰
4. **AutoCalculate**: `_product_base_price * quantity` ã‚’è¨ˆç®—
5. è¨ˆç®—çµæœãŒ`unit_price`ã«è‡ªå‹•è¨­å®š

**ãƒã‚¤ãƒ³ãƒˆ:**
- `_product_base_price`ã¯å†…éƒ¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã«è¡¨ç¤ºã•ã‚Œãªã„ï¼‰
- `unit_price`ã¯`readonly: true`ã§è‡ªå‹•è¨ˆç®—å°‚ç”¨
- `order_id`ã¯`hidden: true`ã§éè¡¨ç¤ºï¼ˆè‡ªå‹•æ¡ç•ªï¼‰

### 8. ç¨è¾¼ä¾¡æ ¼ã®è‡ªå‹•è¨ˆç®—ãƒ‘ã‚¿ãƒ¼ãƒ³

```json
{
  "price": {
    "type": "DECIMAL",
    "precision": 10,
    "scale": 2,
    "labels": {
      "ja": "æœ¬ä½“ä¾¡æ ¼",
      "en": "Base Price"
    },
    "ui": {
      "inputType": "number",
      "step": "0.01"
    }
  },
  "tax_rate": {
    "type": "DECIMAL",
    "precision": 5,
    "scale": 2,
    "constraints": {
      "default": "10.00"
    },
    "labels": {
      "ja": "ç¨ç‡(%)",
      "en": "Tax Rate (%)"
    },
    "ui": {
      "inputType": "number",
      "step": "0.01"
    }
  },
  "tax_included_price": {
    "type": "DECIMAL",
    "precision": 10,
    "scale": 2,
    "labels": {
      "ja": "ç¨è¾¼ä¾¡æ ¼",
      "en": "Tax Included Price"
    },
    "ui": {
      "inputType": "number",
      "readonly": true
    },
    "autoCalculate": {
      "enabled": true,
      "formula": "price * (1 + tax_rate / 100)",
      "targetField": "tax_included_price",
      "triggerFields": ["price", "tax_rate"]
    }
  }
}
```

---

## æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ä¾‹

ä¾‹ï¼šå¾“æ¥­å“¡ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ã™ã‚‹å ´åˆ

```json
{
  "tables": {
    "æ—¢å­˜ã®ãƒ†ãƒ¼ãƒ–ãƒ«": { ... },
    "employees": {
      "metadata": {
        "icon": "ğŸ‘¥",
        "color": "#2ECC71",
        "sortOrder": 5,
        "category": "human_resources",
        "labels": {
          "ja": "å¾“æ¥­å“¡",
          "en": "Employees"
        },
        "description": {
          "ja": "å¾“æ¥­å“¡æƒ…å ±ã®ç®¡ç†",
          "en": "Employee information management"
        }
      },
      "columns": {
        "id": {
          "type": "BIGINT",
          "constraints": {
            "primaryKey": true,
            "autoIncrement": true,
            "nullable": false
          },
          "labels": {
            "ja": "å¾“æ¥­å“¡ID",
            "en": "Employee ID"
          },
          "ui": {
            "hidden": true,
            "readonly": true
          }
        },
        "employee_number": {
          "type": "VARCHAR",
          "length": 20,
          "constraints": {
            "nullable": false,
            "unique": true
          },
          "labels": {
            "ja": "ç¤¾å“¡ç•ªå·",
            "en": "Employee Number"
          },
          "ui": {
            "inputType": "text",
            "placeholder": {
              "ja": "ç¤¾å“¡ç•ªå·ã‚’å…¥åŠ›",
              "en": "Enter employee number"
            }
          },
          "validation": {
            "required": true,
            "maxLength": 20
          }
        },
        "department_id": {
          "type": "BIGINT",
          "constraints": {
            "nullable": true
          },
          "labels": {
            "ja": "éƒ¨ç½²",
            "en": "Department"
          },
          "foreignKey": {
            "table": "departments",
            "column": "id",
            "displayColumn": "name",
            "onDelete": "SET NULL",
            "onUpdate": "CASCADE"
          },
          "ui": {
            "inputType": "select",
            "allowNull": true,
            "nullLabel": {
              "ja": "æœªé…å±",
              "en": "Unassigned"
            }
          }
        },
        "salary": {
          "type": "DECIMAL",
          "precision": 10,
          "scale": 2,
          "constraints": {
            "nullable": true
          },
          "labels": {
            "ja": "çµ¦ä¸",
            "en": "Salary"
          },
          "ui": {
            "inputType": "number",
            "step": "1000",
            "min": 0
          },
          "validation": {
            "min": 0
          }
        }
      }
    }
  }
}
```

---

## ä½œæ¥­ãƒ•ãƒ­ãƒ¼

### 1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†
`json_create/examples/table-metadata.json` ã‚’ç·¨é›†

### 2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
```bash
cd json_create
python generator.py
```

### 3. å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
`json_create/output/` ãƒ•ã‚©ãƒ«ãƒ€ã«ä»¥ä¸‹ãŒç”Ÿæˆã•ã‚Œã‚‹ï¼š
- `table-config.json`
- `validation-config.json`
- `ui-config.json`
- `types.ts`
- SQLãƒ•ã‚¡ã‚¤ãƒ«ç¾¤
- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤

### 4. ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•
ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ç­‰ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’èµ·å‹•

### 5. å‹•ä½œç¢ºèª
ãƒ–ãƒ©ã‚¦ã‚¶ã§ CRUD æ“ä½œã‚’ãƒ†ã‚¹ãƒˆ

---

## æ³¨æ„äº‹é …

1. **JSONæ§‹æ–‡**: æœ«å°¾ã®ã‚«ãƒ³ãƒã«æ³¨æ„
2. **å¤–éƒ¨ã‚­ãƒ¼**: å‚ç…§å…ˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å…ˆã«å®šç¾©
3. **ãƒ‡ãƒ¼ã‚¿å‹**: SQLã¨ã®äº’æ›æ€§ã‚’ç¢ºèª
4. **æ–‡å­—ã‚³ãƒ¼ãƒ‰**: UTF-8ã§ä¿å­˜
5. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: ç·¨é›†å‰ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

- **ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ©ãƒ¼**: JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
- **ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«**: output ãƒ•ã‚©ãƒ«ãƒ€ã®å†…å®¹ã‚’ç¢ºèª
- **ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•**: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
- **ç”»é¢è¡¨ç¤º**: ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª

ã“ã®è¨­å®šã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦ `table-metadata.json` ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã§ã€è‡ªç”±ã«ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ï¼